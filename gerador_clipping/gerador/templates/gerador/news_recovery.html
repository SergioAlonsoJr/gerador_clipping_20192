<h2>Recupere notícias e as inclua no Clipping {{project.name}}</h2>

<form action="{% url 'gerador:news_recovery' project.id%}">
<!--
    <b>Doenças:</b>
    <input type="checkbox" name="disease" value="aids" id="aids" checked>
    <label for="aids">aids</label>

    <input type="checkbox" name="disease" value="dengue" id="dengue" checked>
    <label for="dengue">dengue</label>

    <input type="checkbox" name="disease" value="ebola" id="ebola" checked>
    <label for="ebola">ebola</label>

    <input type="checkbox" name="disease" value="sarampo" id="sarampo" checked>
    <label for="sarampo">sarampo</label>

    <input type="checkbox" name="disease" value="cancer" id="cancer" checked>
    <label for="cancer">câncer</label>

    <input type="text" name="extra_disease">
-->
    
    <!--
        <br>
        <b>Lugar:</b>
    -->
    
    <!--
    <br>
    <b>Idade:</b>
    <input type="radio" name="age" value="24h" id="24h" checked/>
    <label for="24h">24h</label>

    <input type="radio" name="age" value="2d" id="2d"/>
    <label for="2d">2 dias</label>

    <input type="radio" name="age" value="1s" id="1s"/>
    <label for="1s">1 semana</label>

    <input type="radio" name="age" value="1m" id="1m"/>
    <label for="1m">1 mês</label>

    <input type="radio" name="age" value="any" id="any"/>
    <label for="any">1 mês</label>

    <br>
    <b>Ordernar:</b>
    
    <input type="radio" name="sort" value="score" id="score" checked/>
    <label for="score">relevância</label>
    
    <input type="radio" name="sort" value="date" id="date"/>
    <label for="date">data</label>
    
    <br>
    
    <input type="submit" value="Buscar"/>
-->
    

</form>

<a href="{% url 'gerador:explorer' %}">Voltar ao explorador de projetos</a>
<br>
<a href="{% url 'gerador:clipping_organizer' project.id %}">Organizar e Exportar</a>
<br>


<table>

{% for news in news_result  %}
    <tr>
        <td>
            {{news.is_included}}
            {% if news.is_included == False %}
            <form action="{% url 'gerador:insert_news' project.id%}" method="post">
                 {% csrf_token %}
                  <input type="hidden" name="title" value="{{ news.title }}" />
                  <input type="hidden" name="content" value="{{ news.content }}" />
                  <input type="hidden" name="author" value="{{ news.author }}" />
                  <input type="hidden" name="url" value="{{ news.url }}" />
                  <input type="hidden" name="publishedAt" value="{{ news.publishedAt }}" />
                  <input type="hidden" name="urlToImage" value="{{ news.urlToImage }}" />
                  <input type="hidden" name="source_db_id" value="{{ news.id }}" />
                  
                  
                  <input type="submit" value="Incluir"/>
            </form>
            {% else %}
             <form action="{% url 'gerador:remove_news' project.id%}" method="post">
                 {% csrf_token %}
                 
                  <input type="hidden" name="source_db_id" value="{{ news.id }}" />
                  <input type="submit" value="Remover"/>
            </form>

            {% endif %}
        </td>
        <td>
            <img src="{{ news.urlToImage}}" height="140">
        </td>
        <td>
            <strong> {{news.title}} </strong>
                {{news.publishedAt}} <br>{{news.author}}
        </td>
        
        <td>
            <p> {{news.content}} <a href="{{news.url}}" target="_blank">Ver mais</a></p>
        </td>
        
        </tr>
{% endfor%}
</table>

</form>
